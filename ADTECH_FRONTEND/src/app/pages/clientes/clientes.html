<!-- Dashboard Container com Menu Lateral -->
<div class="dashboard-container">
  <!-- Menu Lateral -->
  <div class="navigation">
    <ul>
      <li>
        <a routerLink="/dashboard" routerLinkActive="active">
          <span class="icon"><ion-icon name="grid-outline"></ion-icon></span>
          <span class="title">Dashboard</span>
        </a>
      </li>
      <li>
        <a routerLink="/clientes/lista" routerLinkActive="active">
          <span class="icon"><ion-icon name="people-outline"></ion-icon></span>
          <span class="title">Lista de Clientes</span>
        </a>
      </li>
      <li>
        <a routerLink="/clientes" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          <span class="icon"><ion-icon name="person-add-outline"></ion-icon></span>
          <span class="title">Novo Cliente</span>
        </a>
      </li>
      <li>
        <a href="#">
          <span class="icon"><ion-icon name="business-outline"></ion-icon></span>
          <span class="title">Empresas</span>
        </a>
      </li>
      <li>
        <a href="#">
          <span class="icon"><ion-icon name="analytics-outline"></ion-icon></span>
          <span class="title">Relatórios</span>
        </a>
      </li>
      <li>
        <a routerLink="/documentos" routerLinkActive="active">
          <span class="icon"><ion-icon name="document-text-outline"></ion-icon></span>
          <span class="title">Documentos</span>
        </a>
      </li>
      <li>
        <a routerLink="/processos" routerLinkActive="active">
          <span class="icon"><ion-icon name="folder-open-outline"></ion-icon></span>
          <span class="title">Processos</span>
        </a>
      </li>
      <li>
        <a href="#">
          <span class="icon"><ion-icon name="settings-outline"></ion-icon></span>
          <span class="title">Configurações</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Área Principal -->
  <div class="main">
    <!-- Background EFEITOS -->
    <div class="hero-flare"></div>
    <div class="hero-flare-secondary"></div>
    <div class="hero-triangle-pattern"></div>

    <!-- HEADER DA PÁGINA - Fora do card -->
    <div class="page-header">
      <div class="page-header-icon">
        <ion-icon name="person-add-outline"></ion-icon>
      </div>
      <div class="page-header-content">
        <h1 class="page-title">Cadastro de Cliente</h1>
        <p class="page-subtitle">Preencha os dados para criar uma nova conta</p>
      </div>
    </div>

    <!-- Layout em 2 colunas -->
    <div class="cadastro-layout">
      <!-- COLUNA ESQUERDA - Formulário -->
      <div class="cadastro-column">
        <div class="cadastro-card">

        <!-- Mensagem de erro/sucesso -->
        @if (errorMessage) {
        <div class="error-message">
          {{ errorMessage }}
        </div>
        }
        @if (successMessage) {
        <div class="success-message">
          {{ successMessage }}
        </div>
        }

        <!-- FORMULÁRIO -->
        <form (ngSubmit)="onSubmit($event)" class="form-animation">
          <!-- DADOS BÁSICOS -->
          <div class="section-title">DADOS BÁSICOS</div>

          <!-- Tipo -->
          <div class="form-group">
            <label>Tipo</label>
            <div class="tipo-toggle">
              <button
                type="button"
                class="tipo-btn"
                [class.active]="clienteForm.tipo === 'fisica'"
                (click)="selectTipo('fisica')">
                <i class="fas fa-user"></i>
                Física
              </button>
              <button
                type="button"
                class="tipo-btn"
                [class.active]="clienteForm.tipo === 'juridica'"
                (click)="selectTipo('juridica')">
                <i class="fas fa-building"></i>
                Jurídica
              </button>
            </div>
          </div>

          <!-- CPF / CNPJ e Telefone Celular -->
          <div class="form-row">
            <div class="form-group col-50">
              <label [attr.for]="clienteForm.tipo === 'fisica' ? 'cpf' : 'cnpj'">
                {{ clienteForm.tipo === 'fisica' ? 'CPF' : 'CNPJ' }}
                <span class="required">*</span>
              </label>
              <div class="input-wrapper" [class.error]="hasError('cpfCnpj')">
                <input
                  type="text"
                  [id]="clienteForm.tipo === 'fisica' ? 'cpf' : 'cnpj'"
                  [(ngModel)]="clienteForm.cpfCnpj"
                  name="cpfCnpj"
                  class="form-input"
                  [placeholder]="clienteForm.tipo === 'fisica' ? '000.000.000-00' : '00.000.000/0000-00'"
                  required
                />
                <i class="fas fa-id-card input-icon"></i>
              </div>
              @if (hasError('cpfCnpj')) {
                <span class="error-text">{{ getError('cpfCnpj') }}</span>
              }
            </div>

            <div class="form-group col-50">
              <label for="telefoneCelular">
                Telefone Celular
                <span class="required">*</span>
              </label>
              <div class="input-wrapper" [class.error]="hasError('telefoneCelular')">
                <input
                  type="tel"
                  id="telefoneCelular"
                  [(ngModel)]="clienteForm.telefoneCelular"
                  name="telefoneCelular"
                  class="form-input"
                  placeholder="(00) 00000-0000"
                  required
                />
                <i class="fas fa-mobile-alt input-icon"></i>
              </div>
              @if (hasError('telefoneCelular')) {
                <span class="error-text">{{ getError('telefoneCelular') }}</span>
              }
            </div>
          </div>

          <!-- Nome -->
          <div class="form-group">
            <label for="nome">
              Nome {{ clienteForm.tipo === 'juridica' ? 'da Empresa' : 'Completo' }}
              <span class="required">*</span>
            </label>
            <div class="input-wrapper" [class.error]="hasError('nome')">
              <input
                type="text"
                id="nome"
                [(ngModel)]="clienteForm.nome"
                name="nome"
                class="form-input"
                [placeholder]="clienteForm.tipo === 'fisica' ? 'Digite o nome completo' : 'Digite o nome da empresa'"
                required
              />
              <i class="fas fa-user input-icon"></i>
            </div>
            @if (hasError('nome')) {
              <span class="error-text">{{ getError('nome') }}</span>
            }
          </div>

          @if (clienteForm.tipo === 'fisica') {
          <!-- Maior de Idade - Melhorado -->
          <div class="form-group">
            <div class="idade-verification" [class.error]="hasError('maiorIdade')">
              <div class="idade-icon">
                <ion-icon name="shield-checkmark-outline"></ion-icon>
              </div>
              <div class="idade-content">
                <label class="idade-checkbox">
                  <input
                    type="checkbox"
                    [(ngModel)]="clienteForm.maiorIdade"
                    name="maiorIdade"
                    class="checkbox-input"
                  />
                  <span class="checkmark"></span>
                  <span class="idade-text">
                    <strong>Confirmo que sou maior de 18 anos</strong>
                    <small>Necessário para prosseguir com o cadastro</small>
                  </span>
                </label>
              </div>
            </div>
            @if (hasError('maiorIdade')) {
              <span class="error-text">{{ getError('maiorIdade') }}</span>
            }
          </div>

          <!-- Gênero -->
          <div class="form-group">
            <label>Identidade de Gênero</label>
            <div class="genero-options">
              <label class="radio-option">
                <input
                  type="radio"
                  name="genero"
                  value="masculino"
                  [(ngModel)]="clienteForm.genero"
                />
                <span class="radio-label">
                  <i class="fas fa-mars"></i>
                  Masculino
                </span>
              </label>
              <label class="radio-option">
                <input
                  type="radio"
                  name="genero"
                  value="feminino"
                  [(ngModel)]="clienteForm.genero"
                />
                <span class="radio-label">
                  <i class="fas fa-venus"></i>
                  Feminino
                </span>
              </label>
              <label class="radio-option">
                <input
                  type="radio"
                  name="genero"
                  value="outros"
                  [(ngModel)]="clienteForm.genero"
                />
                <span class="radio-label">
                  <i class="fas fa-transgender"></i>
                  Outros
                </span>
              </label>
              <label class="radio-option">
                <input
                  type="radio"
                  name="genero"
                  value="prefiro-nao-identificar"
                  [(ngModel)]="clienteForm.genero"
                />
                <span class="radio-label">
                  <i class="fas fa-user-secret"></i>
                  Prefiro não identificar
                </span>
              </label>
            </div>
          </div>

          <!-- RG, Profissão, Data de Nascimento -->
          <div class="form-row">
            <div class="form-group col-33">
              <label for="rg">RG</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  id="rg"
                  [(ngModel)]="clienteForm.rg"
                  name="rg"
                  class="form-input"
                  placeholder="00.000.000-0"
                />
                <i class="fas fa-id-card-alt input-icon"></i>
              </div>
            </div>
            <div class="form-group col-33">
              <label for="profissao">Profissão</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  id="profissao"
                  [(ngModel)]="clienteForm.profissao"
                  name="profissao"
                  class="form-input"
                  placeholder="Ex: Engenheiro"
                />
                <i class="fas fa-briefcase input-icon"></i>
              </div>
            </div>
            <div class="form-group col-33">
              <label for="dataNascimento">Data de nascimento</label>
              <div class="input-wrapper">
                <input
                  type="date"
                  id="dataNascimento"
                  [(ngModel)]="clienteForm.dataNascimento"
                  name="dataNascimento"
                  class="form-input"
                />
                <i class="fas fa-calendar input-icon"></i>
              </div>
            </div>
          </div>

          <!-- Naturalidade -->
          <div class="form-group">
            <label for="naturalidade">Naturalidade</label>
            <div class="input-wrapper">
              <input
                type="text"
                id="naturalidade"
                [(ngModel)]="clienteForm.naturalidade"
                name="naturalidade"
                class="form-input"
                placeholder="Ex: São Paulo/SP"
              />
              <i class="fas fa-map-marker-alt input-icon"></i>
            </div>
          </div>

          <!-- Estado Civil, Nome da Mãe, Nome do Pai -->
          <div class="form-row">
            <div class="form-group col-33">
              <label for="estadoCivil">Estado civil</label>
              <div class="input-wrapper">
                <select
                  id="estadoCivil"
                  [(ngModel)]="clienteForm.estadoCivil"
                  name="estadoCivil"
                  class="form-input"
                >
                  <option value="">Selecione</option>
                  <option value="solteiro">Solteiro(a)</option>
                  <option value="casado">Casado(a)</option>
                  <option value="divorciado">Divorciado(a)</option>
                  <option value="viuvo">Viúvo(a)</option>
                  <option value="separado">Separado(a)</option>
                  <option value="uniao-estavel">União Estável</option>
                </select>
                <i class="fas fa-heart input-icon"></i>
              </div>
            </div>
            <div class="form-group col-33">
              <label for="nomeMae">Nome da mãe</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  id="nomeMae"
                  [(ngModel)]="clienteForm.nomeMae"
                  name="nomeMae"
                  class="form-input"
                  placeholder="Nome completo"
                />
                <i class="fas fa-female input-icon"></i>
              </div>
            </div>
            <div class="form-group col-33">
              <label for="nomePai">Nome do pai</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  id="nomePai"
                  [(ngModel)]="clienteForm.nomePai"
                  name="nomePai"
                  class="form-input"
                  placeholder="Nome completo"
                />
                <i class="fas fa-male input-icon"></i>
              </div>
            </div>
          </div>
          }
          <!-- Botões de Ação -->
          <div class="form-actions">
            <button type="button" class="btn-cancelar" (click)="onCancel()">
              <i class="fas fa-times"></i>
              Cancelar
            </button>
            <button type="submit" class="btn-cadastrar" [disabled]="isLoading">
              <i class="fas fa-check"></i>
              {{ isLoading ? 'Cadastrando...' : 'Cadastrar Cliente' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- COLUNA DIREITA - Documentos -->
    <div class="documentos-column">
      <div class="documentos-wrapper">
        <div class="documentos-header">
          <div class="header-icon">
            <ion-icon name="documents-outline"></ion-icon>
          </div>
          <div class="header-content">
            <h2>Documentos</h2>
            <p>Anexe os documentos necessários</p>
          </div>
        </div>

        <div class="documentos-scroll">
          <!-- Foto do Cliente - Card Destaque -->
      <div class="documento-card documento-card-photo">
        <div class="documento-card-header">
          <div class="documento-icon">
            <ion-icon name="camera-outline"></ion-icon>
          </div>
          <div class="documento-info">
            <h3>Foto do Cliente</h3>
            <span class="documento-subtitle">Foto de perfil (JPG, PNG)</span>
          </div>
        </div>

        <div class="documento-card-body">
          <input
            type="file"
            id="foto"
            (change)="onFileSelected($event)"
            accept="image/*"
            class="file-input"
            #fileInput
          />

          @if (!fotoPreview) {
            <div class="upload-area" (click)="fileInput.click()">
              <div class="upload-icon">
                <ion-icon name="cloud-upload-outline"></ion-icon>
              </div>
              <p class="upload-text">Clique para selecionar a foto</p>
              <span class="upload-hint">ou arraste e solte aqui</span>
            </div>
          } @else {
            <div class="preview-area">
              <img [src]="fotoPreview" alt="Preview da foto" class="preview-image" />
              <div class="preview-overlay">
                <button type="button" class="btn-preview-action" (click)="fileInput.click()">
                  <ion-icon name="create-outline"></ion-icon>
                  Alterar
                </button>
                <button type="button" class="btn-preview-action btn-delete" (click)="removeDocument('foto')">
                  <ion-icon name="trash-outline"></ion-icon>
                  Remover
                </button>
              </div>
              @if (clienteForm.foto) {
                <div class="file-info">
                  <ion-icon name="document-outline"></ion-icon>
                  <span>{{ clienteForm.foto.name }}</span>
                </div>
              }
            </div>
          }
        </div>
      </div>

      <!-- Grid de Documentos -->
      <div class="documentos-grid">
        <!-- Comprovante de Endereço -->
        <div class="documento-card" [class.has-file]="clienteForm.comprovanteEndereco">
          <div class="documento-card-header">
            <div class="documento-icon">
              <ion-icon name="home-outline"></ion-icon>
            </div>
            <div class="documento-info">
              <h3>Comprovante</h3>
              <span class="documento-subtitle">Comprovante de Endereço</span>
            </div>
            @if (clienteForm.comprovanteEndereco) {
              <div class="status-badge status-success">
                <ion-icon name="checkmark-circle"></ion-icon>
                Anexado
              </div>
            }
          </div>

          <div class="documento-card-body">
            <input
              type="file"
              id="comprovanteEndereco"
              (change)="onDocumentSelected($event, 'comprovanteEndereco')"
              accept="image/*,.pdf"
              class="file-input"
              #compEnderecoInput
            />

            @if (!clienteForm.comprovanteEndereco) {
              <button type="button" class="btn-upload" (click)="compEnderecoInput.click()">
                <ion-icon name="cloud-upload-outline"></ion-icon>
                <span>Selecionar Arquivo</span>
              </button>
            } @else {
              <div class="file-attached">
                <div class="file-icon">
                  <ion-icon name="document-attach-outline"></ion-icon>
                </div>
                <div class="file-details">
                  <span class="file-name">{{ clienteForm.comprovanteEndereco.name }}</span>
                </div>
                <div class="file-actions">
                  <button type="button" class="btn-icon" (click)="compEnderecoInput.click()" title="Alterar">
                    <ion-icon name="create-outline"></ion-icon>
                  </button>
                  <button type="button" class="btn-icon btn-delete" (click)="removeDocument('comprovanteEndereco')" title="Remover">
                    <ion-icon name="trash-outline"></ion-icon>
                  </button>
                </div>
              </div>
            }
          </div>
        </div>

        <!-- CNH -->
        <div class="documento-card" [class.has-file]="clienteForm.cnh">
          <div class="documento-card-header">
            <div class="documento-icon">
              <ion-icon name="car-outline"></ion-icon>
            </div>
            <div class="documento-info">
              <h3>CNH</h3>
              <span class="documento-subtitle">Carteira de Habilitação</span>
            </div>
            @if (clienteForm.cnh) {
              <div class="status-badge status-success">
                <ion-icon name="checkmark-circle"></ion-icon>
                Anexado
              </div>
            }
          </div>

          <div class="documento-card-body">
            <input
              type="file"
              id="cnh"
              (change)="onDocumentSelected($event, 'cnh')"
              accept="image/*,.pdf"
              class="file-input"
              #cnhInput
            />

            @if (!clienteForm.cnh) {
              <button type="button" class="btn-upload" (click)="cnhInput.click()">
                <ion-icon name="cloud-upload-outline"></ion-icon>
                <span>Selecionar Arquivo</span>
              </button>
            } @else {
              <div class="file-attached">
                <div class="file-icon">
                  <ion-icon name="document-attach-outline"></ion-icon>
                </div>
                <div class="file-details">
                  <span class="file-name">{{ clienteForm.cnh.name }}</span>
                </div>
                <div class="file-actions">
                  <button type="button" class="btn-icon" (click)="cnhInput.click()" title="Alterar">
                    <ion-icon name="create-outline"></ion-icon>
                  </button>
                  <button type="button" class="btn-icon btn-delete" (click)="removeDocument('cnh')" title="Remover">
                    <ion-icon name="trash-outline"></ion-icon>
                  </button>
                </div>
              </div>
            }
          </div>
        </div>

        <!-- Certidão de Nascimento -->
        <div class="documento-card" [class.has-file]="clienteForm.certidaoNascimento">
          <div class="documento-card-header">
            <div class="documento-icon">
              <ion-icon name="ribbon-outline"></ion-icon>
            </div>
            <div class="documento-info">
              <h3>Certidão</h3>
              <span class="documento-subtitle">Certidão de Nascimento</span>
            </div>
            @if (clienteForm.certidaoNascimento) {
              <div class="status-badge status-success">
                <ion-icon name="checkmark-circle"></ion-icon>
                Anexado
              </div>
            }
          </div>

          <div class="documento-card-body">
            <input
              type="file"
              id="certidaoNascimento"
              (change)="onDocumentSelected($event, 'certidaoNascimento')"
              accept="image/*,.pdf"
              class="file-input"
              #certidaoInput
            />

            @if (!clienteForm.certidaoNascimento) {
              <button type="button" class="btn-upload" (click)="certidaoInput.click()">
                <ion-icon name="cloud-upload-outline"></ion-icon>
                <span>Selecionar Arquivo</span>
              </button>
            } @else {
              <div class="file-attached">
                <div class="file-icon">
                  <ion-icon name="document-attach-outline"></ion-icon>
                </div>
                <div class="file-details">
                  <span class="file-name">{{ clienteForm.certidaoNascimento.name }}</span>
                </div>
                <div class="file-actions">
                  <button type="button" class="btn-icon" (click)="certidaoInput.click()" title="Alterar">
                    <ion-icon name="create-outline"></ion-icon>
                  </button>
                  <button type="button" class="btn-icon btn-delete" (click)="removeDocument('certidaoNascimento')" title="Remover">
                    <ion-icon name="trash-outline"></ion-icon>
                  </button>
                </div>
              </div>
            }
          </div>
        </div>

        <!-- Título de Eleitor -->
        <div class="documento-card" [class.has-file]="clienteForm.tituloEleitor">
          <div class="documento-card-header">
            <div class="documento-icon">
              <ion-icon name="checkmark-done-circle-outline"></ion-icon>
            </div>
            <div class="documento-info">
              <h3>Título Eleitor</h3>
              <span class="documento-subtitle">Título de Eleitor</span>
            </div>
            @if (clienteForm.tituloEleitor) {
              <div class="status-badge status-success">
                <ion-icon name="checkmark-circle"></ion-icon>
                Anexado
              </div>
            }
          </div>

          <div class="documento-card-body">
            <input
              type="file"
              id="tituloEleitor"
              (change)="onDocumentSelected($event, 'tituloEleitor')"
              accept="image/*,.pdf"
              class="file-input"
              #tituloInput
            />

            @if (!clienteForm.tituloEleitor) {
              <button type="button" class="btn-upload" (click)="tituloInput.click()">
                <ion-icon name="cloud-upload-outline"></ion-icon>
                <span>Selecionar Arquivo</span>
              </button>
            } @else {
              <div class="file-attached">
                <div class="file-icon">
                  <ion-icon name="document-attach-outline"></ion-icon>
                </div>
                <div class="file-details">
                  <span class="file-name">{{ clienteForm.tituloEleitor.name }}</span>
                </div>
                <div class="file-actions">
                  <button type="button" class="btn-icon" (click)="tituloInput.click()" title="Alterar">
                    <ion-icon name="create-outline"></ion-icon>
                  </button>
                  <button type="button" class="btn-icon btn-delete" (click)="removeDocument('tituloEleitor')" title="Remover">
                    <ion-icon name="trash-outline"></ion-icon>
                  </button>
                </div>
              </div>
            }
          </div>
        </div>

        <!-- Carteira de Trabalho -->
        <div class="documento-card" [class.has-file]="clienteForm.carteiraTrabalho">
          <div class="documento-card-header">
            <div class="documento-icon">
              <ion-icon name="briefcase-outline"></ion-icon>
            </div>
            <div class="documento-info">
              <h3>Carteira Trabalho</h3>
              <span class="documento-subtitle">Carteira de Trabalho</span>
            </div>
            @if (clienteForm.carteiraTrabalho) {
              <div class="status-badge status-success">
                <ion-icon name="checkmark-circle"></ion-icon>
                Anexado
              </div>
            }
          </div>

          <div class="documento-card-body">
            <input
              type="file"
              id="carteiraTrabalho"
              (change)="onDocumentSelected($event, 'carteiraTrabalho')"
              accept="image/*,.pdf"
              class="file-input"
              #carteiraInput
            />

            @if (!clienteForm.carteiraTrabalho) {
              <button type="button" class="btn-upload" (click)="carteiraInput.click()">
                <ion-icon name="cloud-upload-outline"></ion-icon>
                <span>Selecionar Arquivo</span>
              </button>
            } @else {
              <div class="file-attached">
                <div class="file-icon">
                  <ion-icon name="document-attach-outline"></ion-icon>
                </div>
                <div class="file-details">
                  <span class="file-name">{{ clienteForm.carteiraTrabalho.name }}</span>
                </div>
                <div class="file-actions">
                  <button type="button" class="btn-icon" (click)="carteiraInput.click()" title="Alterar">
                    <ion-icon name="create-outline"></ion-icon>
                  </button>
                  <button type="button" class="btn-icon btn-delete" (click)="removeDocument('carteiraTrabalho')" title="Remover">
                    <ion-icon name="trash-outline"></ion-icon>
                  </button>
                </div>
              </div>
            }
          </div>
        </div>
      </div>
        </div>
      </div>
    </div>
  </div>
</div>
